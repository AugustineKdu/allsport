# 🛠️ 관리자 가이드

## 개요

AllSports 관리자 시스템은 데이터베이스와 JSON 파일을 동시에 사용하는 이중 저장 시스템으로 구축되었습니다. 이를 통해 데이터 안정성과 백업 기능을 제공합니다.

## 🚀 관리자 계정 생성

### 명령어로 관리자 생성
```bash
php artisan admin:create "관리자이름" "admin@example.com" "비밀번호"
```

### 예시
```bash
php artisan admin:create "김관리" "admin@allsports.com" "securepassword123"
```

## 📊 관리자 대시보드

### 접속 방법
1. 관리자 계정으로 로그인
2. 우측 상단 드롭다운 메뉴에서 "🛠️ 관리자 대시보드" 클릭
3. 또는 직접 `/admin` 경로로 접속

### 주요 기능
- **통계 대시보드**: 사용자, 팀, 경기 수 등의 실시간 통계
- **시스템 상태**: 데이터베이스와 JSON 백업 상태 확인
- **빠른 작업**: 각 관리 기능으로 바로 이동

## 👥 사용자 관리

### 사용자 목록
- **경로**: `/admin/users`
- **기능**:
  - 사용자 검색 (이름, 이메일, 닉네임)
  - 역할별 필터링 (일반 사용자, 팀장, 관리자)
  - 상태별 필터링 (활성, 비활성, 팀장)

### 사용자 상세 관리
- **보기**: 사용자 정보, 최근 활동, 소속 팀 확인
- **편집**: 사용자 정보 수정, 역할 변경
- **경고**: 사용자에게 경고 메시지 전송
- **상태 토글**: 계정 활성화/비활성화
- **삭제**: 사용자 계정 삭제 (주의: 되돌릴 수 없음)

### 경고 시스템
- **경고 유형**:
  - 경미한 경고: 가벼운 규칙 위반
  - 심각한 경고: 반복적인 문제 행동
  - 매우 심각한 경고: 심각한 규칙 위반
- **경고 기록**: JSON 파일로 자동 저장
- **이메일 알림**: 향후 구현 예정

## 📍 지역 관리

### 지역 목록
- **경로**: `/admin/regions`
- **기능**:
  - 모든 지역 목록 조회
  - 지역 활성화/비활성화
  - 지역 삭제 (관련 팀/경기 없을 때만)

### 지역 추가
- **단일 추가**: 시/도와 구/군 입력하여 개별 추가
- **대량 추가**: JSON 형식으로 여러 지역 한번에 추가

#### 대량 추가 JSON 형식
```json
[
  {"city": "서울특별시", "district": "강남구"},
  {"city": "서울특별시", "district": "강서구"},
  {"city": "부산광역시", "district": "해운대구"}
]
```

## ⚽ 스포츠 관리

### 스포츠 목록
- **경로**: `/admin/sports`
- **기능**:
  - 스포츠 종목 목록 조회
  - 스포츠 활성화/비활성화
  - 스포츠 정보 수정
  - 스포츠 삭제 (관련 팀/경기 없을 때만)

### 스포츠 추가
- **스포츠 이름**: 종목명 (예: 축구, 풋살)
- **아이콘**: 표시용 아이콘 (예: ⚽, 🥅)
- **설명**: 스포츠에 대한 설명
- **상태**: 활성/비활성 설정

## 💾 데이터 백업 시스템

### 이중 저장 시스템
- **데이터베이스**: 기본 데이터 저장소
- **JSON 백업**: 자동 백업 및 복원 기능

### 백업 기능
- **자동 백업**: 데이터 변경 시 자동으로 JSON 백업 생성
- **수동 백업**: 관리자 대시보드에서 "지금 백업하기" 버튼
- **명령어 백업**: `php artisan json:backup`

### 복원 기능
- **명령어 복원**: `php artisan json:backup --restore=파일명`
- **백업 파일 위치**: `storage/app/json_data/`

### 백업 파일 형식
```json
{
  "timestamp": "2024-01-15T14:30:00.000Z",
  "users": [...],
  "teams": [...],
  "matches": [...],
  "team_members": [...],
  "regions": [...],
  "sports": [...]
}
```

## ⚙️ 시스템 설정

### 설정 항목
- **JSON 백업 활성화**: 이중 저장 시스템 사용 여부
- **최대 팀 멤버 수**: 팀당 최대 멤버 수 제한
- **경기 유효 기간**: 경기 생성 후 유효 기간 (일 단위)
- **팀 자동 승인**: 팀 생성 시 자동 승인 여부

## 🔒 권한 시스템

### 관리자 권한
- **전체 시스템 접근**: 모든 관리 기능 사용 가능
- **사용자 관리**: 사용자 생성, 수정, 삭제, 경고
- **지역/스포츠 관리**: 지역 및 스포츠 설정 변경
- **데이터 백업**: 시스템 백업 및 복원

### 팀 오너 권한
- **팀 관리**: 자신의 팀 관리
- **경기 생성**: 경기 생성 및 매칭
- **멤버 관리**: 팀 멤버 승인/거부

### 일반 사용자 권한
- **기본 기능**: 팀 가입, 경기 참여
- **제한된 기능**: 팀 생성, 경기 생성 불가

## 🚨 주의사항

### 데이터 삭제
- **사용자 삭제**: 관련 팀, 경기, 멤버십 모두 삭제됨
- **지역 삭제**: 해당 지역의 팀이나 경기가 있으면 삭제 불가
- **스포츠 삭제**: 해당 스포츠의 팀이나 경기가 있으면 삭제 불가

### 백업 관리
- **정기 백업**: 중요 데이터 변경 전 반드시 백업
- **백업 파일 관리**: 오래된 백업 파일 정리 필요
- **복원 테스트**: 정기적으로 백업 복원 테스트 권장

### 시스템 모니터링
- **로그 확인**: `storage/logs/laravel.log` 정기 확인
- **성능 모니터링**: 대량 데이터 처리 시 성능 확인
- **오류 대응**: 시스템 오류 발생 시 즉시 대응

## 📞 지원 및 문의

### 문제 해결
1. **로그 확인**: Laravel 로그 파일 확인
2. **백업 복원**: 문제 발생 시 백업으로 복원
3. **데이터베이스 확인**: 직접 DB 접근하여 데이터 상태 확인

### 개발자 정보
- **프레임워크**: Laravel 12
- **데이터베이스**: SQLite (기본) / MySQL (배포 시)
- **백업 시스템**: JSON 파일 기반
- **관리자 UI**: Blade + TailwindCSS

---

## 🎯 빠른 시작 체크리스트

- [ ] 관리자 계정 생성
- [ ] 관리자 대시보드 접속 확인
- [ ] 지역 데이터 추가
- [ ] 스포츠 종목 설정
- [ ] 데이터 백업 테스트
- [ ] 사용자 관리 기능 테스트
- [ ] 시스템 설정 확인

이제 AllSports 관리자 시스템을 완전히 활용할 수 있습니다! 🚀
